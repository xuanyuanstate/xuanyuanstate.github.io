<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">

  <title>Wormhole</title>

  <!--http://www.html5rocks.com/en/mobile/mobifying/-->
  <meta name="viewport"
    content="width=device-width,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1" />

  <!--https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">

  <!-- force webkit on 360 -->
  <meta name="renderer" content="webkit" />
  <meta name="force-rendering" content="webkit" />
  <!-- force edge on IE -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="msapplication-tap-highlight" content="no">

  <!-- force full screen on some browser -->
  <meta name="full-screen" content="yes" />
  <meta name="x5-fullscreen" content="true" />
  <meta name="360-fullscreen" content="true" />

  <!-- force screen orientation on some browser -->
  <meta name="screen-orientation" content="portrait" />
  <meta name="x5-orientation" content="portrait">

  <!--fix fireball/issues/3568 -->
  <!--<meta name="browsermode" content="application">-->
  <meta name="x5-page-mode" content="app">

  <!-- <meta property="og:url" class="share_url" content="https://wormhole.cool/content?guid=" /> -->
  <meta property="og:url" class="share_url" content="https://wormhole.cool/?guid=152" />

  <!-- <meta property="og:type" content="article" /> -->
  <meta property="og:type" content="website" />

  <meta property="og:title" class="share_title" content="game" />

  <meta property="og:description" content="${contentInfo.description}" />

  <meta property="og:image" content="https://image.baidu.com/search/detail?ct=503316480&z=0&ipn=d&word=11%E5%9B%BE%E7%89%87&hs=2&pn=4&spn=0&di=140030&pi=0&rn=1&tn=baiduimagedetail&is=0%2C0&ie=utf-8&oe=utf-8&cl=2&lm=-1&cs=2992644894%2C1023055516&os=2611084675%2C4114371285&simid=18321141%2C653732413&adpicid=0&lpn=0&ln=30&fr=ala&fm=&sme=&cg=&bdtype=0&oriquery=11%E5%9B%BE%E7%89%87&objurl=http%3A%2F%2Fi2.chuimg.com%2Fad78f872884a11e5b35cb82a72e00100.jpg%3FimageView2%2F2%2Fw%2F600%2Finterlace%2F1%2Fq%2F90&fromurl=ippr_z2C%24qAzdH3FAzdH3Fooo_z%26e3Bxtwvi7uwg2_z%26e3Bv54AzdH3F1tfiAzdH3F888l9mclbAzdH3F&gsm=1&islist=&querylist=" />


  <!--<link rel="apple-touch-icon" href=".png" />-->
  <!--<link rel="apple-touch-icon-precomposed" href=".png" />-->

  <link rel="stylesheet" type="text/css" href="style-mobile.b0780.css" />
  <link rel="icon" href="favicon.8de18.ico" />
</head>

<body>
  <canvas id="GameCanvas" oncontextmenu="event.preventDefault()" tabindex="0"></canvas>
  <div id="splash">
    <div class="progress-bar stripes">
      <span style="width: 0%"></span>
    </div>
  </div>

  <script src="src/settings.1b499.js" charset="utf-8"></script>
  <script src="vconsole.min.bac6b.js"></script>
  <script src="main.06824.js" charset="utf-8"></script>

  <script type="text/javascript">
    (function () {
      // open web debugger console
      if (typeof VConsole !== 'undefined') {
        window.vConsole = new VConsole();
      }

      var debug = window._CCSettings.debug;
      var splash = document.getElementById('splash');
      splash.style.display = 'block';

      function loadScript(moduleName, cb) {
        function scriptLoaded() {
          document.body.removeChild(domScript);
          domScript.removeEventListener('load', scriptLoaded, false);
          cb && cb();
        };
        var domScript = document.createElement('script');
        domScript.async = true;
        domScript.src = moduleName;
        domScript.addEventListener('load', scriptLoaded, false);
        document.body.appendChild(domScript);
      }

      loadScript(debug ? 'cocos2d-js.js' : 'cocos2d-js-min.f5ae1.js', function () {
        if (CC_PHYSICS_BUILTIN || CC_PHYSICS_CANNON) {
          loadScript(debug ? 'physics.js' : 'physics-min.js', window.boot);
        }
        else {
          window.boot();
        }
      });
    })();
  </script>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script>
    window.rzpPay = function (amount, order_id) {
      var options = {
        "key": "rzp_test_nrDL1GiPzEO58V",
        "amount": amount,
        "currency": "INR",
        "name": "Acme Corp",
        "description": "Test Transaction",
        // "image": "https://example.com/your_logo",
        "order_id": order_id,
        "handler": function (response) {
          window.PayFunc(response);
        },
        "prefill": {
          "name": "Gaurav Kumar",
          "email": "gaurav.kumar@example.com",
          "contact": "9999999999"
        },
        "notes": {
          "address": "Razorpay Corporate Office"
        },
        "theme": {
          "color": "#F37254"
        }
      };
      var rzp1 = new Razorpay(options);
      rzp1.open();
    }
  </script>
  <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>
  <script>
    window.fbAsyncInit = function () {
      FB.init({
        appId: '958406731336872',
        cookie: true,
        xfbml: true,
        version: 'v8.0'
      });
    };

    window.fbCheckLoginState = function () {
      FB.getLoginStatus(function (response) {
        window.FBStatusFunc(response);
      });
    }

    window.fbLogin = function () {
      FB.login(function (response) {
        window.FBLoginFunc(response);
      }, { scope: 'public_profile,email' });
    }

    window.fbLogout = function () {
      FB.logout(function (response) {
        window.FBLogoutFunc(response);
      });
    };

    window.fbUserInfo = function () {
      FB.api('/me', function (response) {
        window.FBUserInfoFunc(response);
      });
    }

    window.fbShare = function (contentId) {
      u = document.getElementsByClassName("share_url")[0].content;
      t = document.getElementsByClassName("share_title")[0].content;
      console.log('==========u',u)
      // console.log('==========t',t)
      console.log('==========t',encodeURIComponent(u))
      // console.log('==========t',encodeURIComponent(t))
      console.log('==========1111')
      // console.log("http://www.facebook.com/sharer.php?u=" + encodeURIComponent(u) + "&t=" + encodeURIComponent(t))
      window.open("http://www.facebook.com/sharer.php?u=" + encodeURIComponent(u) + "&t=" + encodeURIComponent(t), "sharer", "toolbar=0,status=0,width=626,height=436");
      // window.open("http://www.facebook.com/sharer.php?u=" + encodeURIComponent(u),"sharer", "toolbar=0,status=0,width=626,height=436");
      // window.open("http://www.facebook.com/sharer.php?u=" + u,"sharer", "toolbar=0,status=0,width=626,height=436");
      // window.open("https://wormhole.games/");
    }
  </script>
  <script async defer crossorigin="anonymous" src="https://apis.google.com/js/api.js"></script>
  <script>
    var GoogleAuth;
    var SCOPE = 'https://www.googleapis.com/auth/drive.metadata.readonly';

    window.ggAsyncInit = function () {
      console.log("handleClientLoad");
      // gapi.load('client:auth2', initClient);
      try {
        gapi.load('auth2', function () {
          auth2 = gapi.auth2.init({
            client_id: '320616085699-e5okcrld64m0m68uuug1oqq1ci6ae7ru.apps.googleusercontent.com',
            cookiepolicy: 'single_host_origin',
            scope: 'https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email'
          }).then(function () {
            GoogleAuth = gapi.auth2.getAuthInstance();
            GoogleAuth.isSignedIn.listen(updateSigninStatus);
            // setSigninStatus();
          });
        });
      } catch (e) {
        console.log(e);
        throw e;
      }
    }

    window.ggCheckLoginState = function () {
      if (GoogleAuth.isSignedIn.get()) {
        var user = GoogleAuth.currentUser.get();
        var profile = user.getBasicProfile();
        console.log("ID: " + profile.getId());
        console.log('Full Name: ' + profile.getName());
        console.log('Given Name: ' + profile.getGivenName());
        console.log('Family Name: ' + profile.getFamilyName());
        console.log("Image URL: " + profile.getImageUrl());
        console.log("Email: " + profile.getEmail());

        var name =  profile.getName();
        var id_token = user.getAuthResponse().id_token;
        console.log("111ID Token: " + id_token);
        window.GGStatusFunc(id_token,name);
      }
      else
      {
        window.GGStatusFunc("");
      }
    }

    window.ggSignIn = function () {
      console.log("ggSignIn", GoogleAuth.isSignedIn.get());
      if (!GoogleAuth.isSignedIn.get()) {
        GoogleAuth.signIn();
      }
      else
      {
        
        var user = GoogleAuth.currentUser.get();
        var id_token = user.getAuthResponse().id_token;
        console.log("222ID Token: " + id_token);
        window.GGStatusFunc(id_token);
      }
    }

    window.ggSignOut = function () {
      if (GoogleAuth.isSignedIn.get()) {
        GoogleAuth.signOut();
      }
    }

    window.ggUserInfo = function () {
      var user = GoogleAuth.currentUser.get();
      var profile = user.getBasicProfile();
      var name =  profile.getName();
      console.log("222 name: " + name);
      window.GGUserInfoFunc(name);
    }

    function setSigninStatus() {
      if (GoogleAuth.isSignedIn.get()) {
        var user = GoogleAuth.currentUser.get();
        var profile = user.getBasicProfile();
        console.log("ID: " + profile.getId());
        console.log('Full Name: ' + profile.getName());
        console.log('Given Name: ' + profile.getGivenName());
        console.log('Family Name: ' + profile.getFamilyName());
        console.log("Image URL: " + profile.getImageUrl());
        console.log("Email: " + profile.getEmail());

        // The ID token you need to pass to your backend:
        var id_token = user.getAuthResponse().id_token;
        console.log("ID Token: " + id_token);
        window.GGStatusFunc(id_token)
      }
      var user = GoogleAuth.currentUser.get();
      var isAuthorized = user.hasGrantedScopes(SCOPE);
      console.log("isAuthorized", isAuthorized);
      if (isAuthorized) {
        console.log("true");
      } else {
        console.log("false");
      }
    }

    function updateSigninStatus() {
      console.log("updateSigninStatus", updateSigninStatus);
      setSigninStatus();
    }
    

    window.ggShare = function (contentId) {
      u = document.getElementsByClassName("share_url")[0].content;
      t = document.getElementsByClassName("share_title")[0].content;
      // window.open("https://plus.google.com/share?url=" + encodeURIComponent(u), "sharer", "menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600");
      location = "whatsapp://send?text=" + encodeURIComponent(t) + encodeURIComponent("\n\n" + u) + "&via=lopscoop";
    }
  </script>
</body>

</html>